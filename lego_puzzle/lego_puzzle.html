<!doctype html>
<html lang="en">
  <head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WFTYSG93P6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-WFTYSG93P6');
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="format-detection" content="telephone=no">
    <title>A Simple 3D Puzzle</title>
	<script type="text/x-mathjax-config"> 
      MathJax.Hub.Register.StartupHook("TeX AMSmath Ready",function () { 
        MathJax.InputJax.TeX.Definitions.environment["densearray"] = 
          ['AMSarray',null,true,true,'rcl','0em .4em']; 
      }); 
	</script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>
    <link rel="stylesheet" href="tufte-edited.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  </head>
  <body>
    <p style="display:none">\(\newcommand{\latexonlyrule}[2]{}\)</p>
    <div class="main">
      <div class="title">A Simple 3D Puzzle</div>
      <div class="author">Tyler Neylon</div>
      <div class="date"><a
href="https://tylerneylon.com/a/7date/">345.2023</a></div>
      
      \(\newcommand{\customstrut}{}\)
      \(\newcommand{\crossedouty}{\dot y \kern -5pt \scriptscriptstyle{\diagup\atop\vphantom{y}}}\)
      \(\newcommand{\crossedoutone}{\dot 1 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 1}}}}\)
      \(\newcommand{\crossedouttwo}{\dot 2 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 2}}}}\)
      \(\newcommand{\crossedoutthree}{\dot 3 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 3}}}}\)
      \(\newcommand{\crossedoutfive}{\dot 5 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 5}}}}\)
      \(\newcommand{\crossedoutsix}{\dot 6 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 6}}}}\)
      \(\newcommand{\crossedoutseven}{\dot 7 \kern -5pt {\scriptscriptstyle{\diagup\atop\vphantom{\textstyle 7}}}}\)
      \(\newcommand{\lowerhaty}{\lower 1ex{\hat y}}\)
      \(\newcommand{\lhy}{\lower 1ex{\hat y}}\)
      \(\renewcommand{\hat}[1]{\widehat{#1}}\)
  <p>[ Formats: <a
  href="http://tylerneylon.com/a/lego_puzzle/lego_puzzle.html">html</a>
  | <a
  href="http://tylerneylon.com/a/lego_puzzle/lego_puzzle.pdf">pdf</a>
  <span class="math inline">\(\,\)</span>]</p>
  <h1 data-number="1" id="the-puzzle"><span
  class="header-section-number">1</span> The Puzzle</h1>
  <p>Here’s a fun puzzle: Take six boxes, each <span
  class="math inline">\(1\times 2\times 2\)</span> in size, and find a
  way to pack them into a <span class="math inline">\(3\times 3\times
  3\)</span> cube.</p>
  <p><img src="img/img1.svg" /></p>
  <p>I learned about this puzzle through Donald Knuth’s <em>The Art of
  Computer Programming,</em> <span class="math inline">\(\S
  7.2.2.1\)</span>. The six boxes have a total volume of 24 cubies (I’ll
  call a <span class="math inline">\(1\times 1\times 1\)</span> unit a
  “cubie,” as Knuth does). They certainly have a chance of fitting into
  the 27 cubie spaces of the larger <span class="math inline">\(3\times
  3\times 3\)</span> volume. But the initial configurations I tried
  failed to fit more than five boxes in the space allowed:</p>
  <p><img src="img/img3.svg" style="width:40.0%" /></p>
  <p>You might be able to solve this by simply thinking about it. But
  it’s even more fun to play with a physical model.</p>
  <p>Did you know that a <span class="math inline">\(2\times 2\)</span>
  Lego brick with 2 tile-heights on top forms a perfect cube?</p>
  <p><img src="img/annotated_lego_cube.png" style="width:50.0%" /></p>
  <p>This allows us to construct the puzzle like so:</p>
  <p><img src="img/piece_steps2.png" style="width:90.0%" /> <img
  src="img/puzzle_box_steps.png" style="width:90.0%" /></p>
  <p>Here’s the hodgepodge model I built with my kids’ Legos:</p>
  <p><img src="img/home_model.jpg" /></p>
  <p>I’ll write a little about the math behind this puzzle below, but
  for now I’ll give you a vertical break so you don’t accidentally see
  the solution. Try out the puzzle first!</p>
  <p>
  <p>  </p>
  <p><img src="img/here_be_spoilers.jpg" style="width:90.0%" /></p>
  <p>
  <p>  </p>
  <h1 data-number="2" id="the-solution"><span
  class="header-section-number">2</span> The Solution</h1>
  <p>Here’s the solution:</p>
  <p><img src="img/solution_steps.svg" style="width:90.0%" /></p>
  <svg width="10" height="10" version="1.1" style="background-color:#fff" id="solution" xmlns="http://www.w3.org/2000/svg">
  </svg>
  <p>The simplest way to characterize it is to notice that we’ve left
  the central cubie unoccupied.</p>
  <p>As pointed out by Knuth, there’s a nice observation that can help
  you find this solution. Define a “face cubie” as one that’s adjacent
  to the center cubie. There are 6 of these, positioned like the middle
  squares of a Rubik’s cube:</p>
  <p><img src="img/face_cubies.svg" style="width:35.0%" /></p>
  <div class="box">
  <p></p>
  <p><strong>Observation 1</strong> <span
  class="math inline">\(\quad\)</span> Every piece must occupy at least
  one face cubie.</p>

  </div>
  <p>This can be confirmed by listing all piece placements within the
  <span class="math inline">\(3\times 3\times 3\)</span> space.</p>
  <p>An immediate consequence of this observation is that — since there
  are 6 face cubies and 6 pieces — each piece must occupy
  <em>exactly</em> 1 face cubie. This alone can give you the solution,
  but things get even easier when you notice:</p>
  <div class="box">
  <p></p>
  <p><strong>Observation 2</strong> <span
  class="math inline">\(\quad\)</span></p>
  <p>Any piece occupying the center cubie must also occupy 2 face
  cubies.</p>

  </div>
  <p>The consequence of <em>this</em> is that we must leave the center
  cubie vacant. In other words, every piece must be against one face of
  the <span class="math inline">\(3\times 3\times 3\)</span> cube — one
  piece for each face. While this fact doesn’t completely specify the
  solution, it makes the search space so small that you can now find the
  answer easily.</p>
  <hr />
  <p>If you’re curious about how algorithms can solve puzzles like this
  one, I recommend reading Knuth’s §7.2.2.1, which is relatively recent
  (in <em>The Art of Computer Programming</em>, volume 4B, published in
  2022). He gives credit to Jan Slothouber and William Graatsma for
  inventing this puzzle, as referenced in their apparently out-of-print
  book <em>Cubics</em> from 1970 (pp. 108–109).</p>
  <h1 data-number="3" id="notes-on-the-images"><span
  class="header-section-number">3</span> Notes on the Images</h1>
  <p>I wrote custom javascript tools to create the vector images in this
  article. If I have time, I may one day clean up that code and release
  it as a library. For now the code is quite messy, and can be found in
  <a
  href="https://github.com/tylerneylon/math/tree/master/lego_puzzle/img_src">this
  directory hosted on github</a>.</p>
  <p>I rendered the Lego images with <a
  href="https://www.bricklink.com/v3/studio/download.page">Studio by
  BrickLink</a>, which is awesome, and I’m grateful it’s free.</p>
  <p>The dragon image (Here be Spoilers) was created with dall·e 2.</p>
    </div>
        <div style="margin-top:40px">
        <hr style="margin-bottom:5px">
        <i style="font-size:1.4rem;color:#aaa;margin-bottom:0">
            You can get emails about new posts if you'd like:</i>
        <p style="margin:0"></p>

      <iframe src="https://tylerneylon.substack.com/embed" width="300"
        height="320" style="background:white; height: 180px;
        margin-top:0;" frameborder="0" scrolling="no"></iframe>
    </div>
    <script type="module" src="solution.js"></script>
  </body>
</html>
